#!/bin/sh

set -e;

PATH="@abs_top_srcdir@/"src/scripts/:"@abs_top_builddir@/src":"$PATH"
INPUT_DIR="@abs_top_srcdir@/"tests/data/

OUTPUT_DIR=test1_output/
LOG_DIR="$OUTPUT_DIR"log/

rm -fr "$OUTPUT_DIR"
mkdir -p "$OUTPUT_DIR"
mkdir -p "$LOG_DIR"

echo acopost-cooked2lex > "$LOG_DIR"test1.log 2>&1
acopost-cooked2lex < "$INPUT_DIR"random_corpus.txt >> "$LOG_DIR"test1.log 2>&1 > "$OUTPUT_DIR"random_corpus.lex
LC_ALL=C diff "$INPUT_DIR"random_corpus.lex "$OUTPUT_DIR"random_corpus.lex >> "$LOG_DIR"test1.log 2>&1

echo acopost-cooked2ngram > "$LOG_DIR"test1.log 2>&1
acopost-cooked2ngram  < "$INPUT_DIR"random_corpus.txt >> "$LOG_DIR"test1.log 2>&1 > "$OUTPUT_DIR"random_corpus.ngrams
LC_ALL=C diff "$INPUT_DIR"random_corpus.ngrams "$OUTPUT_DIR"random_corpus.ngrams >> "$LOG_DIR"test1.log 2>&1

rm -fr "$OUTPUT_DIR"

exit 0;